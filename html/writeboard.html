<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/boardwrite.css">
    <script type="text/javascript" src="../js/common.js"></script>

</head>
<body>
    <header id="header">
        <script>loadHTML("html/common/header.html");</script>
    </header>
    <div class="container">
        <h1>게시판 글쓰기</h1>
        <form id="write-form" enctype="multipart/form-data">
            <label for="title">제목:</label>
            <input type="text" id="title" name="title" required><br>
            <label for="content">내용:</label>
            <textarea id="content" name="content" rows="4" cols="50" required></textarea><br>
            <label for="file">파일 첨부:</label>
            <input type="file" id="file" name="file" accept="image/*"><br>
            <button type="submit">글쓰기</button>
        </form>

        <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
            <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked="">
            <label class="btn btn-outline-primary" for="btnradio1">전체 공개</label>
            <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnradio2">멤버 공개</label>
        </div>

        <div class="btn-group-vertical">
            <button type="button" class="btn btn-primary">유저 맛집 추천</button>
            <button type="button" class="btn btn-primary">맛집 같이 갈 유저 모집</button>
            <button type="button" class="btn btn-primary">유저의 맛집 리뷰</button>
        </div>
    </div>

    <script>
        const posts = [];

        document.getElementById('write-form').addEventListener('submit', function(event) {
            event.preventDefault(); // 폼 제출 기본 동작 방지
            const formData = new FormData(this);
            const newPost = {
                id: posts.length + 1, // 새 게시글의 ID는 현재 게시글 개수 + 1
                title: formData.get('title'),
                content: formData.get('content'),
                authorID: 'currentUserID', // 현재 사용자의 ID 또는 세션 정보에서 가져온 ID
                hits: 0, // 새 게시글의 조회수는 초기값으로 0 설정
                hasFile: !!formData.get('file').name, // 파일 여부는 파일 입력 필드의 값으로 결정
                visibility: formData.get('btnradio') // 공개 범위 설정
            };
            posts.push(newPost); // 새 게시글을 배열에 추가
            renderBoardList(); // 목록을 다시 렌더링하여 새 게시글을 추가합니다.
            this.reset(); // 폼을 초기화합니다.
        });

        function renderBoardList() {
            console.log(posts); // 실제로는 게시글 목록을 HTML로 렌더링하는 코드가 들어가야 합니다.
        }
    </script>
        <footer id="footer">
            <script>loadHTML("html/common/footer.html");</script>
        </footer>
</body>
</html>
