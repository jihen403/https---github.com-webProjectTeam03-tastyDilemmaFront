<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/boardwrite.css">
    <script type="text/javascript" src="/js/common.js"></script>
</head>
<body>
    <header id="header">
        <script>loadHTML("/src/common/header.html");</script>
    </header>
    <div class="container mt-5">
        <div>
        <h1 class="mb-4">게시판 글쓰기</h1>
        <form id="write-form" enctype="multipart/form-data" class="mb-5">
        <div id="in_title">

            <textarea name="title" id="utitle" rows="1" cols="55" placeholder="제목" maxlength="100" required=""></textarea>
        </div>
        <br>
        <img src="/images/mail.jfif" alt="mail" width="150" height="120">
        <div id="in_content">
        <textarea name="content" id="ucontent" placeholder="내용" required=""></textarea>
        </div>
            <div class="mb-3">
                <label for="file" class="form-label">파일 첨부:</label>
                <input type="file" id="file" name="file" accept="image/*" class="form-control">
            </div>
            <div class="mb-4">
                <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked="" value="public">
                    <label class="btn btn-outline-primary" for="btnradio1">전체 공개</label>
                    <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" value="member">
                    <label class="btn btn-outline-primary" for="btnradio2">멤버 공개</label>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">글쓰기</button>
        </form>

        <div class="btn-group-vertical w-100">
            <button type="button" class="btn btn-secondary mb-2">유저 맛집 추천</button>
            <button type="button" class="btn btn-secondary mb-2">맛집 같이 갈 유저 모집</button>
            <button type="button" class="btn btn-secondary">유저의 맛집 리뷰</button>
        </div>
        </div>
    </div>

    <script>
        const posts = [];

        document.getElementById('write-form').addEventListener('submit', function(event) {
            event.preventDefault(); // 폼 제출 기본 동작 방지
            const formData = new FormData(this);
            const newPost = {
                id: posts.length + 1, // 새 게시글의 ID는 현재 게시글 개수 + 1
                title: formData.get('title'),
                content: formData.get('content'),
                authorID: 'currentUserID', // 현재 사용자의 ID 또는 세션 정보에서 가져온 ID
                hits: 0, // 새 게시글의 조회수는 초기값으로 0 설정
                hasFile: !!formData.get('file').name, // 파일 여부는 파일 입력 필드의 값으로 결정
                visibility: formData.get('btnradio') // 공개 범위 설정
            };
            posts.push(newPost); // 새 게시글을 배열에 추가
            renderBoardList(); // 목록을 다시 렌더링하여 새 게시글을 추가합니다.
            this.reset(); // 폼을 초기화합니다.
        });

        function renderBoardList() {
            console.log(posts); // 실제로는 게시글 목록을 HTML로 렌더링하는 코드가 들어가야 합니다.
        }
    </script>
        <footer class="text-lg-center py-lg-2" id="footer">
            <script>loadHTML("/src/common/footer.html");</script>
        </footer>
</body>
</html>
